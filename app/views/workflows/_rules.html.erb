<div class="row">
<div class="col-md-12">
<h2>Subject Rules</h2>
<% for rule in @workflow.subject_rules %>
  <p style="line-height: 3em; margin-bottom: 2em;"><strong>If</strong> <%= render_condition rule.condition %> <strong>then</strong> </p>
<% end %>
<table class="table table-hover table table-sm">
    <thead>
      <tr>
        <th>If</th>
        <th>Then</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% for rule in @workflow.subject_rules %>
        <tr>
          <td>If <%= render_condition rule.condition %></td>
          <td>
            <ul>
              <% rule.subject_rule_effects.each do |rule_effect| %>
                <li><%= render partial: 'effect', locals: {effect: rule_effect.effect} %></li>
              <% end %>
            </ul>
          </td>
          <td>
            <%= link_to "Edit", [:edit, @workflow, rule], class: 'btn btn-primary' %>
            <%= link_to "Destroy", [@workflow, rule], method: :delete, data: {confirm: "Are you sure?"}, class: 'btn btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
</table>
<%= button_to "Create", new_workflow_subject_rule_path(@workflow), :class => "btn btn-default", :method => :get %>

<h2>User Rules</h2>
<%= button_to "Create", new_workflow_user_rule_path(@workflow), :class => "btn btn-default", :method => :get %>
<table class="table table-hover table table-sm">
  <thead>
    <thead class="thead-inverse">
      <tr>
        <th>If</th>
        <th>Then</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% for rule in @workflow.user_rules %>
        <tr>
          <td><%= render_condition rule.condition %></td>
          <td>
            <ul>
              <% rule.user_rule_effects.each do |rule_effect| %>
                <li><%= render partial: 'effect', locals: {effect: rule_effect.effect} %></li>
              <% end %>
            </ul>
          </td>
          <td>
            <%= link_to "Edit", [:edit, @workflow, rule], class: 'btn btn-primary' %>
            <%= link_to "Destroy", [@workflow, rule], method: :delete, data: {confirm: "Are you sure?"}, class: 'btn btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
</table>
</div>
</div>