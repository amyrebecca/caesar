<div class="row">
<div class="col-md-12">
<h2 style="margin-bottom: 1em;">
  <%= @workflow.name || "[Unknown Name] "%>
  <% if @workflow.paused? %>
    (Paused)
  <% end %>
</h2>
<ul class="nav nav-pills">
    <li class="active"><a href="#summary" data-toggle="tab">Summary</a></li>
    <li><a href="#settings" data-toggle="tab">Settings</span></a></li>
    <li><a href="#extractors" data-toggle="tab">Extractors <span class="badge"><%= @workflow.extractors_count %></span></a></li>
    <li><a href="#reducers" data-toggle="tab">Reducers <span class="badge"><%= @workflow.reducers_count %></span></a></li>
    <li><a href="#rules" data-toggle="tab">Rules <span class="badge"><%= (@workflow.subject_rules_count||0) + (@workflow.user_rules_count||0) %></span></a></li>
    <li><a href="#requests" data-toggle="tab">Data Requests <span class="badge"><%= @workflow.data_requests.count %></span></a></li>
    <li><a href="#subjects" data-toggle="tab">Subjects</a></li>
</ul>
<div class="container-fluid">
  <div class="row"><div class="col-md-12">&nbsp;</div></div>
    <div class="tab-content" id="TabContent">
      <div class="tab-pane fade in active" id="summary">
        <%= render partial: 'summary' %>
      </div>
      <div class="tab-pane fade" id="settings">
        <%= render partial: 'settings' %>
      </div>
      <div class="tab-pane fade" id="extractors">
        <%= render partial: 'extractors' %>
      </div>
      <div class="tab-pane fade" id="reducers">
        <%= render partial: 'reducers' %>
      </div>
      <div class="tab-pane fade rules-pane" id="rules">
        <%= render partial: 'rules' %>
      </div>
      <div class="tab-pane fade" id="requests">
        <%= render partial: 'requests' %>
      </div>
      <div class="tab-pane fade" id="subjects">
      </div>
    </div>
  </div>
</div>
</div>
<script type="text/javascript">
if (window.location.hash) {
  $("a[href='" + window.location.hash + "']").tab('show');
}

$('a[data-toggle="tab"]').on('click', function(e) {
  location.hash = $(e.target).attr('href').substr(1);
});
</script>
